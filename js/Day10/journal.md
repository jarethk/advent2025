Part 1 - seemed simple enough, a BFS - for each state figure out which buttons I could press (no pressing same button twice in a row). I must have been tired, made some stupid mistakes in my first pass like not checking if that state had already been visited. Once that was corrected it processed fairly well.

Part 2 - I recognized this as linear algebra right away. I hate linear algebra. I tried coming up with a few different algorithms based on the inputs, but none of them processed well or efficiently. So I resorted to Z3.
